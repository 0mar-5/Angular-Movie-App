import{b as O,d as T,e as P,f as w,k as D,l as k}from"./chunk-TA6HTJUS.js";import{c as S,h as C,p as M,r as x}from"./chunk-CE7CS4CG.js";import{Bb as u,C as _,Cb as y,Na as n,Qb as l,V as s,Ya as f,cb as v,i as g,ka as c,nb as d,ob as p,rb as m,sb as a,tb as o,ub as b}from"./chunk-OPX47V4V.js";function F(r,t){r&1&&(a(0,"div",3),l(1,"Loading..."),o())}function L(r,t){if(r&1&&b(0,"app-movie-card",6),r&2){let e=t.$implicit;m("_mediaData",e)("type",e.title?"movie":"tv")}}function N(r,t){if(r&1&&(a(0,"div",4),v(1,L,1,2,"app-movie-card",5),o()),r&2){let e=y();n(),m("ngForOf",e.searchResults())}}function Q(r,t){r&1&&(a(0,"p",3),l(1,"No results found."),o())}var R=class r{moviesService=s(k);router=s(x);route=s(M);searchTrigger=new g;searchSub;searchQuery=c("");searchResults=c([]);isLoading=c(!1);constructor(){this.route.queryParams.subscribe(t=>{let e=t.query?.trim();e&&(this.searchQuery.set(e),this.search(e))}),this.searchSub=this.searchTrigger.pipe(_(400)).subscribe(t=>{let e=t.trim();e?(this.router.navigate(["/search"],{queryParams:{query:e}}),this.search(e)):this.router.navigate(["/"])})}handleInput(t){this.searchQuery.set(t),this.searchTrigger.next(t)}search(t){this.isLoading.set(!0),this.moviesService.search(t).subscribe(e=>{this.searchResults.set(e),this.isLoading.set(!1)})}triggerSearch(){let t=this.searchQuery().trim();this.searchTrigger.next(t)}ngOnDestroy(){this.searchSub?.unsubscribe()}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=f({type:r,selectors:[["app-search"]],decls:7,vars:4,consts:[[1,"search-bar"],["type","text","pInputText","","name","search","placeholder","Search and explore....",3,"ngModelChange","keydown.enter","ngModel"],["pButton","","type","button","label","Search",3,"click"],[1,"ceter-text"],[1,"results","movies__wrapper"],[3,"_mediaData","type",4,"ngFor","ngForOf"],[3,"_mediaData","type"]],template:function(e,i){e&1&&(a(0,"div",0)(1,"input",1),u("ngModelChange",function(q){return i.handleInput(q)})("keydown.enter",function(){return i.triggerSearch()}),o(),a(2,"button",2),u("click",function(){return i.triggerSearch()}),l(3,"Search"),o()(),d(4,F,2,0,"div",3),d(5,N,2,1,"div",4),d(6,Q,2,0,"p",3)),e&2&&(n(),m("ngModel",i.searchQuery()),n(3),p(i.isLoading()?4:-1),n(),p(i.searchResults().length>0?5:-1),n(),p(!i.isLoading()&&i.searchResults().length===0&&i.searchQuery().length>0?6:-1))},dependencies:[w,O,T,P,C,S,D],styles:[".search-bar[_ngcontent-%COMP%]{display:flex;gap:.5rem;justify-content:center;flex-wrap:wrap;padding-bottom:2rem;margin-top:2rem}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:80%;padding:.75rem 1rem;font-size:1rem;border-radius:.3rem;background:var(--p-inputtext-background);border:1px solid #d7d7d7}.search-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.75rem 1.5rem;font-size:1rem;border-radius:.5rem;border:none;background-color:var(--primary-500);color:var(--primary-contrast-500)}.ceter-text[_ngcontent-%COMP%]{font-size:1.5rem;text-align:center;padding:1rem}@media (max-width: 400px){.search-bar[_ngcontent-%COMP%]{padding-bottom:0rem;margin-top:1.5rem}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:90%}}"]})};export{R as a};

import{b as h,c,e as x,f as y,g as I,h as u,j as F,k as E,l as L,n as N}from"./chunk-MRALMNQ7.js";import{a as k}from"./chunk-WYFZHOPF.js";import{d as C,h as M,t as O,u as S,x as w}from"./chunk-Q3RTI6EG.js";import{Bb as b,Na as d,Qb as n,Sa as v,V as _,Ya as P,cb as s,rb as g,sb as t,tb as o,ub as p}from"./chunk-OPX47V4V.js";function D(r,i){r&1&&(t(0,"p"),n(1,"Invalid email"),o())}function T(r,i){r&1&&(t(0,"p"),n(1,"Password is required"),o())}function G(r,i){r&1&&(t(0,"p",10),n(1,"Invalid email or password"),o())}var R=class r{constructor(i){this.router=i}loginForm;loginError=!1;movieStore=_(k);ngOnInit(){this.loginForm=new I({email:new u("",[c.required,c.pattern("[^\\s@]+@[^\\s@]+\\.[^\\s@]+$")]),password:new u("",c.required)})}loginSubmit(){let i=this.loginForm.value.email,l=this.loginForm.value.password,e=localStorage.getItem("users");if(e){let a=JSON.parse(e).find(f=>f.email===i&&f.password===l);if(a){localStorage.setItem("loggedIn","true"),localStorage.setItem("userData",JSON.stringify(a)),this.movieStore.loadUserWatchList(),this.router.navigate(["/"]);return}}this.loginError=!0}static \u0275fac=function(l){return new(l||r)(v(O))};static \u0275cmp=P({type:r,selectors:[["app-login-page"]],decls:21,vars:5,consts:[[3,"ngSubmit","formGroup"],["for","email"],["id","email","type","email","formControlName","email"],[4,"ngIf"],["for","password"],["id","password","type","password","formControlName","password"],["style","color:red",4,"ngIf"],[3,"disabled"],[1,"goToReg"],["routerLink","/register"],[2,"color","red"]],template:function(l,e){if(l&1&&(t(0,"section")(1,"form",0),b("ngSubmit",function(){return e.loginSubmit()}),t(2,"h2"),n(3,"Login"),o(),t(4,"div")(5,"label",1),n(6,"Email"),o(),p(7,"input",2),s(8,D,2,0,"p",3),o(),t(9,"div")(10,"label",4),n(11,"Password"),o(),p(12,"input",5),s(13,T,2,0,"p",3),o(),s(14,G,2,0,"p",6),t(15,"button",7),n(16,"Login"),o(),t(17,"p",8),n(18," Don't have an account? "),t(19,"a",9),n(20,"Register here"),o()()()()),l&2){let m,a;d(),g("formGroup",e.loginForm),d(7),g("ngIf",((m=e.loginForm.get("email"))==null?null:m.invalid)&&((m=e.loginForm.get("email"))==null?null:m.touched)),d(5),g("ngIf",((a=e.loginForm.get("password"))==null?null:a.invalid)&&((a=e.loginForm.get("password"))==null?null:a.touched)),d(),g("ngIf",e.loginError),d(),g("disabled",e.loginForm.invalid)}},dependencies:[M,C,N,F,h,x,y,E,L,w,S],styles:["form[_ngcontent-%COMP%]{max-width:500px;margin:2rem auto;padding:2rem;background-color:var(--primary-500);border-radius:1rem;box-shadow:0 6px 16px #0000000d;font-family:Segoe UI,sans-serif}form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;color:#fff;margin-bottom:1.5rem}form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:1.2rem}form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;margin-bottom:.5rem;color:var(--primary-contrast-500)}form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.5rem .75rem;border:1px solid #ccc;background-color:var(--p-inputtext-background)!important;border-radius:.5rem;font-size:1rem;transition:border .3s ease}form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#2d6a4f;outline:none;background-color:#f9fff9}form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:#e63946;background-color:#fff0f0}form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#e63946;font-size:.875rem;margin-top:.4rem;padding-left:.2rem}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;padding:.75rem;background-color:#34d399;color:#fff;border:none;border-radius:.5rem;font-size:1rem;font-weight:700;cursor:pointer;transition:background-color .3s ease}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#1e5639}.goToReg[_ngcontent-%COMP%]{padding-top:1.5rem;font-size:16px}a[_ngcontent-%COMP%]{text-decoration:underline;padding-left:.3rem;cursor:pointer}@media (max-width: 600px){form[_ngcontent-%COMP%]{padding:1.5rem}}"]})};export{R as LoginPage};
